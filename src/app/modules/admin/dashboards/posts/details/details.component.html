<div class="post absolute inset-0 flex flex-col min-w-0 overflow-hidden">
    <mat-drawer-container class="flex-auto h-full">
      <!-- Drawer -->
      <mat-drawer
        class="w-90 dark:bg-gray-900"
        [autoFocus]="false"
        [mode]="drawerMode"
        [opened]="drawerOpened"
        #matDrawer
      >
        <div class="flex flex-col items-start p-8 border-b">
          <!-- Back to posts -->
          <a
            class="inline-flex items-center leading-6 text-primary hover:underline"
            [routerLink]="['..']"
          >
            <span class="inline-flex items-center">
              <mat-icon
                class="icon-size-5 text-current"
                [svgIcon]="'heroicons_solid:arrow-sm-left'"
              ></mat-icon>
              <span class="ml-1.5 font-medium leading-5">Back to posts</span>
            </span>
          </a>
          <!-- Post category -->
          <ng-container
            *ngIf="
              post.category! | ancodeFindByKey : 'slug' : categories as category
            "
          >
            <div
              class="mt-7 py-0.5 px-3 rounded-full text-sm font-semibold"
              [ngClass]="{
                'text-blue-800 bg-blue-100 dark:text-blue-50 dark:bg-blue-500':
                  category.slug === 'web',
                'text-green-800 bg-green-100 dark:text-green-50 dark:bg-green-500':
                  category.slug === 'android',
                  'text-pink-800 bg-pink-100 dark:text-pink-50 dark:bg-pink-500':
                  category.slug === 'health',
                'text-amber-800 bg-amber-100 dark:text-amber-50 dark:bg-amber-500':
                  category.slug === 'lifestyle',
                'text-yellow-800 bg-yellow-100 dark:text-yellow-50 dark:bg-yellow-500':
                  category.slug === 'science'
              }"
            >
              {{ category.title }}
            </div>
          </ng-container>
          <!-- Post title & description -->
          <div class="mt-3 text-2xl font-semibold">{{ post.title }}</div>
          <div class="text-secondary">Created By : {{ post.author }}</div>
          <!-- Post time -->
          <div class="mt-6 flex items-center leading-5 text-md text-secondary">
            <mat-icon
              class="icon-size-5 text-hint"
              [svgIcon]="'heroicons_solid:clock'"
            ></mat-icon>
            <div class="ml-1.5">{{ post.updatedAt }}</div>
          </div>
        </div>
  
        <!-- Actions -->
        <div class="py-2 px-8">
          <div
            class="py-2 text-primary font-semibold text-sm uppercase tracking-wider"
          >
            Post Controls
          </div>
          <ng-container>
            <div class="relative group py-6">
              <div
                class="relative flex items-start cursor-pointer"
                (click)="goToTab(0)"
              >
                <div
                  class="flex flex-0 items-center justify-center w-8 h-8 rounded-full ring-2 ring-inset ring-transparent bg-card dark:bg-default"
                >
                  <mat-icon
                    class="icon-size-5 text-green-600"
                    [svgIcon]="'heroicons_solid:badge-check'"
                  >
                  </mat-icon>
                </div>
                <div class="ml-4">
                  <div class="font-medium leading-4">View Post</div>
                  <div class="mt-1.5 text-md leading-4 text-secondary">
                    Explore Your Creation: Dive into the View Post Tab and
                    Experience Your Content
                  </div>
                </div>
              </div>
            </div>
            <div class="relative group py-6">
              <div
                class="relative flex items-start cursor-pointer"
                (click)="goToTab(1)"
              >
                <div
                  class="flex flex-0 items-center justify-center w-8 h-8 rounded-full ring-2 ring-inset ring-transparent bg-card dark:bg-default"
                >
                  <mat-icon class="icon-size-5" [svgIcon]="'feather:edit-3'">
                  </mat-icon>
                </div>
                <div class="ml-4">
                  <div class="font-medium leading-4">Edit Post</div>
                  <div class="mt-1.5 text-md leading-4 text-secondary">
                    Revise and Refine: Enhance Your Content with the Edit Post Tab
                  </div>
                </div>
              </div>
            </div>
          </ng-container>
        </div>
      </mat-drawer>
      <!-- Drawer content -->
      <mat-drawer-content class="flex flex-col overflow-hidden">
        <!-- Header -->
        <div
          class="lg:hidden flex flex-0 items-center py-2 pl-4 pr-6 sm:py-4 md:pl-6 md:pr-8 border-b lg:border-b-0 bg-card dark:bg-transparent"
        >
          <!-- Title & Actions -->
          <button mat-icon-button [routerLink]="['..']">
            <mat-icon [svgIcon]="'heroicons_outline:arrow-small-left'"></mat-icon>
          </button>
          <h2
            class="ml-2.5 text-md sm:text-xl font-medium tracking-tight truncate"
          >
            {{ post.title }}
          </h2>
        </div>
        <mat-progress-bar
          class="hidden lg:block flex-0 h-0.5 w-full"
          [value]="progressValue"
        ></mat-progress-bar>
  
        <!-- Main -->
        <div
          class="flex-auto overflow-y-auto"
          (scroll)="onScroll($event)"
          cdkScrollable
        >
          <!-- post content -->
          <form [formGroup]="postForm">
            <mat-tab-group
              class="ancode-mat-no-header"
              [animationDuration]="'200'"
              #postActions
            >
              <ng-container>
                <mat-tab>
                  <ng-template matTabContent>
                    <div
                      class="prose prose-sm max-w-3xl mx-auto sm:my-2 lg:mt-4 p-6 sm:p-10 sm:py-12 rounded-2xl shadow overflow-hidden bg-card"
                      [innerHTML]="post.description"
                    ></div>
                  </ng-template>
                </mat-tab>
                <mat-tab>
                  <ng-template matTabContent>
                    <div
                      class="prose prose-sm max-w-3xl mx-auto sm:my-2 lg:mt-4 p-6 sm:p-10 sm:py-12 rounded-2xl shadow overflow-hidden bg-card"
                    >
                      <!-- Title -->
                      <mat-form-field class="w-full">
                        <mat-label>Post Title</mat-label>
                        <textarea
                          matInput
                          [formControlName]="'title'"
                          [spellcheck]="false"
                          cdkTextareaAutosize
                        ></textarea>
                        <mat-error *ngIf="postForm.get('title')?.hasError('required')">
                          Please enter the post title
                      </mat-error>
                      </mat-form-field>
                      <!-- Body -->
                      <quill-editor
                      class="mt-2 ancode-large-editor"
                      [formControlName]="'description'"
                      [modules]="quillModules"></quill-editor>
                      <div
            class="flex self-start py-2 overflow-hidden items-center justify-center"
          >
            <mat-form-field class="w-full ">
              <mat-label>Author & Category</mat-label>
              <textarea
                matInput
                [formControlName]="'author'"
                [spellcheck]="false"
                cdkTextareaAutosize
              ></textarea>
              <div class="flex items-center cursor-pointer"  matRipple
            [matMenuTriggerFor]="projectsMenu">
              <div
                class="overflow-hidden py-0.5 px-3 rounded-full text-sm font-semibold"
                [ngClass]="{
                  'text-blue-800 bg-blue-100 dark:text-blue-50 dark:bg-blue-500':
                    selectedCategory === 'web',
                  'text-green-800 bg-green-100 dark:text-green-50 dark:bg-green-500':
                    selectedCategory === 'android',
                  'text-pink-800 bg-pink-100 dark:text-pink-50 dark:bg-pink-500':
                    selectedCategory === 'health',
                  'text-amber-800 bg-amber-100 dark:text-amber-50 dark:bg-amber-500':
                    selectedCategory === 'lifestyle',
                  'text-yellow-800 bg-yellow-100 dark:text-yellow-50 dark:bg-yellow-500':
                    selectedCategory === 'science'
                }"
              >
                <div class="font-medium leading-6 truncate">
                  {{ selectedCategory }}
                </div>
              </div>
            </div>
            <mat-menu #projectsMenu="matMenu">
              <button
                mat-menu-item
                *ngFor="let category of categories"
                (click)="selectCategory(category.slug!)"
              >
                {{ category.title }}
              </button>
            </mat-menu>
            <mat-error *ngIf="postForm.get('author')?.hasError('required')">
              Please enter the author name and select a category
            </mat-error>
            </mat-form-field>
            
          </div>
                      <!-- Actions -->
                      <div class="flex items-center mt-10 -mx-6 sm:-mx-12 py-4 pr-4 pl-1 sm:pr-12 sm:pl-7 border-t bg-gray-50 dark:bg-transparent">
                        <!-- Delete -->
                        <button
                            mat-button
                            [color]="'warn'"
                            [matTooltip]="'Delete'"
                            (click)="deletePost()"
                          >
                            Delete
                        </button>
                        <!-- Cancel -->
                        <button
                            class="ml-auto"
                            mat-button
                            [matTooltip]="'Cancel'"
                            (click)=" cancel()"
                            >
                            Cancel
                        </button>
                        <!-- Save -->
                        <button
                            class="ml-2"
                            mat-flat-button
                            [color]="'primary'"
                            (click)="updatePost()"
                            [matTooltip]="'Save'"
                            >
                            Save
                        </button>
                    </div>
                    </div>
                  </ng-template>             
                </mat-tab>
              </ng-container>
            </mat-tab-group>
          </form>
          
        </div>
  
        <!-- Progress & Navigation - Mobile -->
        <div class="lg:hidden flex items-center p-4 border-t bg-card">
          <button mat-icon-button (click)="matDrawer.toggle()">
            <mat-icon [svgIcon]="'heroicons_outline:list-bullet'"></mat-icon>
          </button>
          <mat-progress-bar
            class="flex-auto ml-6 rounded-full"
            [value]="progressValue"
          ></mat-progress-bar>
        </div>
      </mat-drawer-content>
    </mat-drawer-container>
  </div>
  